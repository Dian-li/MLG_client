
<div class="easyui-layout" style="width:100%;height:100%;">
    <div id="content" region="center" style="padding:5px; width: 200px;height: 300px;">
        <form id="scriptform" method="post" enctype="multipart/form-data">
            <table class="table table-celled table-structured">
                <tr>
                    <td width="100px" style="text-align: center">上传脚本文件：</td>
                    <td>
                        <input class="easyui-filebox" id="scriptfile"  name="file" style="width: 300px"/>
                    </td>
                </tr>
                <tr>
                    <td width="100px" style="text-align: center">测试协议类型：</td>
                    <td><select id="scriptProtocol" name="SCRIPTPROTOCOL" class="easyui-combobox" style="width: 200px">
                        <option value="socket" selected>Socket</option>
                        <option value="http">HTTP</option>
                        <option value="ftp">FTP</option>
                        <option value="db">数据库</option>
                        <option value="mixture">混合协议</option>
                    </select>
                    </td>
                </tr>
                <tr>
                    <td width="100px" style="text-align: center">理论平均执行时间(S):</td>
                    <td width="100px" align="left"><input id="exetime" class="easyui-textbox" type="text" style="float:right;width: 200px" name="EXETIME" data-options="required:true" />
                    </td>
                </tr>
                <tr>
                    <td width="100px" style="text-align: center">备注:</td>
                    <td width="100px" align="left"><input id="remark" class="easyui-textbox" type="text" style="float:right;width: 200px" name="REMARK"  />
                    </td>
                </tr>
            </table>
        </form>
            <div style="padding:5px;text-align:center;">
                <a  class="easyui-linkbutton" id="uploadscript" iconCls="icon-upload" onclick="addScript()">上传</a>
            </div>
        <!--<input id="fileupload" type="file" name="file" data-url="http://localhost:8080/MLG/scriptsMana/uploadTestScripts" multiple>-->
    </div>
</div>

<script type="text/javascript">

//   $(function () {
//       //文件上传前触发事件
//       $('#scriptfile').bind('fileuploadsubmit', function (e, data) {
//           data.formData = { SCRIPTPROTOCOL: $("#scriptProtocol option selected").val(),EXETIME:$('#exetime').val(),REMARK:$('#remark').val() };  //如果需要额外添加参数可以在这里添加
//       });
//       $('#scriptfile').fileupload({
//           url: "http://localhost:8080/MLG/scriptsMana/uploadTestScripts",  //文件上传地址，当然也可以直接写在input的data-url属性内
//           dataType: 'json',
//           add: function (e, data) {
//               data.context = $('#uploadscript').click(function () {
//                   data.submit();
//               });
//           },
//           done: function (e, data) {
//
//               openDialog("上传成功！");
//
//           }
//
//       });
//
//   });




    function addScript(){

        $('#scriptform').form({
            url:'http://localhost:8080/MLG/scriptsMana/uploadNotModuleScripts',
            //data:$('#scriptform').serialize(),
            cache : false,
            async: true,
            contentType:'application/x-www-form-urlencoded',
            onSubmit:function () {
               // alert("success");
            },
            success:function (data) {
                alert("success"+data);

            }
        });
        $('#scriptform').submit();
    }

</script>
